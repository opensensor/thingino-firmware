USBNET_VERSION = $(LINUX_VERSION_PROBED)
USBNET_SITE_METHOD = local
USBNET_SITE = $(LINUX_DIR)/drivers/net/usb

USBNET_MODULE_MAKE_OPTS = \
	KSRC=$(LINUX_DIR) \
	KVERSION=$(LINUX_VERSION_PROBED)

define USBNET_LINUX_CONFIG_FIXUPS
	$(call KCONFIG_SET_OPT,CONFIG_USB_USBNET,y)
	$(call KCONFIG_SET_OPT,CONFIG_USB_SERIAL_WWAN,m)
	$(call KCONFIG_SET_OPT,CONFIG_USB_SERIAL_OPTION,m)
	$(call KCONFIG_SET_OPT,CONFIG_USB_NET_AX8817X,y)
	$(call KCONFIG_SET_OPT,CONFIG_USB_NET_CDCETHER,m)
	$(call KCONFIG_SET_OPT,CONFIG_USB_NET_RNDIS_HOST,m)
endef

define USBNET_INSTALL_TARGET_CMDS
	$(INSTALL) -m 755 -D $(USBNET_PKGDIR)/files/S38usbnet $(TARGET_DIR)/etc/init.d/S38usbnet
endef

$(eval $(kernel-module))
$(eval $(generic-package))
